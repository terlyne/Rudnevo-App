{% extends "panel/base.html" %}

{% block title %}
Руднево - {% if is_edit %}Редактирование{% else %}Создание{% endif %} вакансии
{% endblock %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/panel/vacancies/vacancy_form.css') }}">
{% endblock %}

{% block container %}
<div class="form-header">
    <h1>{% if is_edit %}Редактирование{% else %}Создание{% endif %} вакансии</h1>
    <a href="{{ url_for('panel.vacancies_list') }}" class="btn-back">← Назад к списку</a>
</div>

<div class="form-container">
    <form method="POST" class="vacancy-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">

        <div class="form-section">
            <h3>Основная информация</h3>

            <div class="form-group">
                <label for="title">Название вакансии *</label>
                <input type="text" id="title" name="title" required value="{{ vacancy.title if vacancy else '' }}"
                    placeholder="Введите название вакансии">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="direction">Направление *</label>
                    <select id="direction" name="direction" required>
                        <option value="">Выберите направление</option>
                        <option value="Электроника" {% if vacancy and vacancy.direction=='Электроника' %}selected{%
                            endif %}>Электроника</option>
                        <option value="Машиностроение" {% if vacancy and vacancy.direction=='Машиностроение'
                            %}selected{% endif %}>Машиностроение</option>
                        <option value="Автоматизация производства" {% if vacancy and
                            vacancy.direction=='Автоматизация производства' %}selected{% endif %}>Автоматизация
                            производства</option>
                        <option value="Авиационная промышленность и беспилотные авиационные системы" {% if vacancy and
                            vacancy.direction=='Авиационная промышленность и беспилотные авиационные системы'
                            %}selected{% endif %}>Авиационная промышленность и беспилотные авиационные системы</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="speciality">Специальность/профессия *</label>
                    <select id="speciality" name="speciality" required>
                        <option value="">Выберите специальность</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="description">Описание вакансии *</label>
                <textarea id="description" name="description" rows="6" required
                    placeholder="Подробное описание вакансии, обязанности, задачи">{{ vacancy.description if vacancy else '' }}</textarea>
            </div>

            <div class="form-group">
                <label for="requirements">Требования *</label>
                <textarea id="requirements" name="requirements" rows="4" required
                    placeholder="Требования к кандидату, навыки, опыт">{{ vacancy.requirements if vacancy else '' }}</textarea>
            </div>
        </div>

        <div class="form-section">
            <h3>Условия работы</h3>

            <div class="form-row">
                <div class="form-group">
                    <label for="work_format">Формат работы *</label>
                    <select id="work_format" name="work_format" required>
                        <option value="">Выберите формат</option>
                        <option value="Очно" {% if vacancy and vacancy.work_format=='Очно' %}selected{% endif %}>Очно
                        </option>
                        <option value="Удаленно" {% if vacancy and vacancy.work_format=='Удаленно' %}selected{% endif
                            %}>Удаленно</option>
                        <option value="Гибрид" {% if vacancy and vacancy.work_format=='Гибрид' %}selected{% endif %}>
                            Гибрид</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="required_amount">Количество мест *</label>
                    <input type="number" id="required_amount" name="required_amount" min="1" required
                        value="{{ vacancy.required_amount if vacancy else 1 }}">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="start">Дата начала *</label>
                    <input type="date" id="start" name="start" required value="{{ vacancy.start if vacancy else '' }}">
                </div>

                <div class="form-group">
                    <label for="end">Дата окончания *</label>
                    <input type="date" id="end" name="end" required value="{{ vacancy.end if vacancy else '' }}">
                </div>
            </div>

            <div class="form-group">
                <label for="chart">График работы *</label>
                <textarea id="chart" name="chart" rows="3" required
                    placeholder="График работы, часы, дни недели">{{ vacancy.chart if vacancy else '' }}</textarea>
            </div>
        </div>

        <div class="form-section">
            <h3>Контактная информация</h3>

            <div class="form-group">
                <label for="contact_person">Контактное лицо *</label>
                <input type="text" id="contact_person" name="contact_person" required value="{{ vacancy.contact_person if vacancy else '' }}" placeholder="Информация о контактном лице (ФИО, телефон, email и т.д.)">
            </div>
        </div>

        <div class="form-section">
            <h3>Публикация</h3>

            <div class="form-group checkbox-group">
                <label class="checkbox-label vacancy-checkbox-label">
                    <input type="checkbox" id="is_hidden" name="is_hidden" {% if vacancy and vacancy.is_hidden
                        %}checked{% endif %}>
                    <span class="checkmark"></span>
                    Скрыть вакансию (не показывать публично)
                </label>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn-submit">
                {% if is_edit %}Сохранить изменения{% else %}Создать вакансию{% endif %}
            </button>
            <a href="{{ url_for('panel.vacancies_list') }}" class="btn-cancel">Отмена</a>
        </div>
    </form>
</div>

<script src="{{ url_for('static', filename='js/panel/vacancies/vacancy_form.js') }}"></script>
{% endblock %}