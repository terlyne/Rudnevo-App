{% extends "panel/base.html" %}

{% block title %}
–†—É–¥–Ω–µ–≤–æ - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
{% endblock %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/panel/schedule/schedule_list.css') }}">
{% endblock %}

{% block container %}
<div class="schedule-container">
    <div class="schedule-header">
        <h1>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h1>
        <button class="btn-create" onclick="createSchedule()">
            <span class="btn-icon">+</span>
            –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
        </button>
    </div>

    <div class="schedule-list">
        {% for schedule_item in schedule %}
        <div class="schedule-card {% if schedule_item.is_hidden %}hidden{% endif %}">
            <div class="schedule-header">
                <div class="schedule-info">
                    <h3 class="schedule-title">{{ schedule_item.title }}</h3>
                    <div class="schedule-meta">
                        <span class="schedule-date">{{ schedule_item.date }}</span>
                        <span class="schedule-time">{{ schedule_item.time }}</span>
                        <div class="schedule-status">
                            {% if schedule_item.is_hidden %}
                                <span class="status-hidden">–°–∫—Ä—ã—Ç–æ</span>
                            {% else %}
                                <span class="status-visible">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="schedule-actions">
                    <button type="button" class="btn-edit" onclick="return editSchedule({{ schedule_item.id }})">
                        <span class="btn-icon">‚úèÔ∏è</span>
                        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                    <form method="POST" action="{{ url_for('panel.schedule_toggle_visibility', schedule_id=schedule_item.id) }}" style="display: inline;">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token }}"/>
                        <button type="submit" class="btn-toggle" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è?')">
                            <span class="btn-icon">üëÅÔ∏è</span>
                            {% if schedule_item.is_hidden %}–ü–æ–∫–∞–∑–∞—Ç—å{% else %}–°–∫—Ä—ã—Ç—å{% endif %}
                        </button>
                    </form>
                    <form method="POST" action="{{ url_for('panel.schedule_delete', schedule_id=schedule_item.id) }}" style="display: inline;">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token }}"/>
                        <button type="submit" class="btn-delete" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')">
                            <span class="btn-icon">üóëÔ∏è</span>
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </form>
                </div>
            </div>
            <div class="schedule-content">
                <p>{{ schedule_item.description }}</p>
            </div>
        </div>
        {% endfor %}
        
        {% if not schedule %}
        <div class="no-schedule">
            <div class="no-schedule-icon">üìÖ</div>
            <div class="no-schedule-text">–°–æ–±—ã—Ç–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>
            <div class="no-schedule-subtext">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ"</div>
        </div>
        {% endif %}
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è -->
<div id="scheduleModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle">–°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ</h2>
            <span class="close" onclick="closeScheduleModal()">&times;</span>
        </div>
        <form id="scheduleForm" method="POST" action="{{ url_for('panel.schedule_create') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}"/>
            <div class="form-group">
                <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è *</label>
                <input type="text" id="title" name="title" required>
            </div>
            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="description" name="description" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label for="date">–î–∞—Ç–∞ *</label>
                <input type="date" id="date" name="date" required>
            </div>
            <div class="form-group">
                <label for="time">–í—Ä–µ–º—è *</label>
                <input type="time" id="time" name="time" required>
            </div>
            <div class="form-group">
                <label for="location">–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è</label>
                <input type="text" id="location" name="location">
            </div>
            <div class="form-actions">
                <button type="button" class="btn-cancel" onclick="closeScheduleModal()">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit" class="btn-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/panel/schedule/schedule_list.js') }}"></script>
{% endblock %}